(this["webpackJsonpgoit-react-hw-07-phonebook"]=this["webpackJsonpgoit-react-hw-07-phonebook"]||[]).push([[0],{13:function(t,e,n){t.exports={form:"registration_form__1P9zo",input:"registration_input__1eFNx",buttonAdd:"registration_buttonAdd__2ugu7",registrationContainer:"registration_registrationContainer__3aU0b"}},22:function(t,e,n){t.exports={list:"contacs_list__1h71m",item:"contacs_item__1g80T",contactsList:"contacs_contactsList__3z6lQ",contactsTitle:"contacs_contactsTitle__2tKf0"}},25:function(t,e,n){t.exports={form:"form_form__2jnye",input:"form_input__2ZuzD",buttonAdd:"form_buttonAdd__3wWPI"}},34:function(t,e,n){t.exports={container:"usermenu_container__3dfpV",name:"usermenu_name__29NPj",button:"usermenu_button__3Uswq"}},35:function(t,e,n){t.exports={link:"home_link__2Hf76",greatings:"home_greatings__3rca6"}},38:function(t,e,n){t.exports={mainSection:"app_mainSection__1YYCI"}},40:function(t,e,n){t.exports={section:"filter_section__2sXh1",input:"filter_input__wa3kE"}},54:function(t,e,n){t.exports={container:"container_container__3_dRP"}},62:function(t,e,n){},97:function(t,e,n){"use strict";n.r(e);var c=n(1),a=n(0),r=n.n(a),o=n(28),s=n.n(o),i=(n(62),n(38)),u=n.n(i),l=n(2),b=n(16),j=n(25),d=n.n(j),f=n(21),O=n.n(f),h=n(17),p=n.n(h),g=n(26),m=n(4),x=n(15),v=n.n(x),_="contact/filter",C=Object(m.b)("contacts/addContactRequest"),y=Object(m.b)("contacts/addContactSuccess"),k=Object(m.b)("contacts/addContactError"),N=Object(m.b)("contacts/deleteContactRequest"),w=Object(m.b)("contacts/deleteContactSuccess"),L=Object(m.b)("contacts/deleteContactError"),S=Object(m.b)(_),I=Object(m.b)("contacts/fetchContactRequest"),T=Object(m.b)("contacts/fetchContactSuccess"),A=Object(m.b)("contacts/fetchContactError");v.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var F,U,E,P=function(t){v.a.defaults.headers.common.Authorization="Bearer ".concat(t)},D=function(){v.a.defaults.headers.common.Authorization=""},z={addContact:function(t,e){return function(n){var c={name:t,number:e};n(C()),v.a.post("/contacts",c).then((function(t){var e=t.data;return n(y(e))})).catch((function(t){return n(k(t))}))}},deleteContact:function(t){return function(e){e(N()),v.a.delete("/contacts/".concat(t)).then((function(){return e(w(t))})).catch((function(t){return e(L(t))}))}},fetchContacts:function(){return function(t){t(I()),v.a.get("/contacts").then((function(e){var n=e.data;return t(T(n))})).catch((function(e){return t(A(e))}))}},register:Object(m.c)("auth/register",function(){var t=Object(g.a)(p.a.mark((function t(e){var n,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.post("/users/signup",e);case 3:return n=t.sent,a=n.data,P(a.token),t.abrupt("return",a);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",Object(c.jsx)("span",{children:"\u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"}));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),logIn:Object(m.c)("auth/logIn",function(){var t=Object(g.a)(p.a.mark((function t(e){var n,a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.post("/users/login",e);case 3:return n=t.sent,a=n.data,P(a.token),t.abrupt("return",a);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",Object(c.jsx)("span",{children:"\u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"}));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),logOut:Object(m.c)("auth/logout",Object(g.a)(p.a.mark((function t(){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.post("/users/logout");case 3:D(),t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",Object(c.jsx)("span",{children:"\u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"}));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))),fetchCurrentUser:Object(m.c)("auth/refresh",function(){var t=Object(g.a)(p.a.mark((function t(e,n){var c,a,r,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n.getState(),null!==(a=c.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return P(a),t.prev=5,t.next=8,v.a.get("/users/current");case 8:return r=t.sent,o=r.data,t.abrupt("return",o);case 13:t.prev=13,t.t0=t.catch(5);case 15:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}())},B=n(32),R=n(5),q=n(7),W=Object(m.d)([],(F={},Object(R.a)(F,T,(function(t,e){return e.payload})),Object(R.a)(F,y,(function(t,e){return[].concat(Object(B.a)(t),[e.payload])})),Object(R.a)(F,w,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),F)),H=Object(m.d)(!1,(U={},Object(R.a)(U,I,(function(){return!0})),Object(R.a)(U,T,(function(){return!1})),Object(R.a)(U,A,(function(){return!1})),Object(R.a)(U,C,(function(){return!0})),Object(R.a)(U,y,(function(){return!1})),Object(R.a)(U,k,(function(){return!1})),Object(R.a)(U,N,(function(){return!0})),Object(R.a)(U,w,(function(){return!1})),Object(R.a)(U,L,(function(){return!1})),U)),Y=Object(q.c)({contacts:W,filter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=e.type,c=e.payload;switch(n){case _:return c;default:return t}},loading:H}),J=n(18),V=n(53),K=n.n(V),M=n(19),Q=Object(m.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isloggedIn:!1,isFetchingCurrent:!1},extraReducers:(E={},Object(R.a)(E,z.register.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(R.a)(E,z.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(R.a)(E,z.logOut.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(R.a)(E,z.fetchCurrentUser.fulfilled,(function(t,e){t.user=Object(M.a)({},e.payload),t.isLoggedIn=!0,t.isFetchingCurrent=!1})),Object(R.a)(E,z.fetchCurrentUser.pending,(function(t){t.isFetchingCurrent=!0})),Object(R.a)(E,z.fetchCurrentUser.rejected,(function(t){t.isFetchingCurrent=!1})),E)}).reducer,X=Object(B.a)(Object(m.f)({serializableCheck:{ignoredActions:[J.a,J.f,J.b,J.c,J.d,J.e]}})),Z={key:"auth",storage:K.a,whitelist:["token"]},G=Object(m.a)({reducer:{contacts:Y,auth:Object(J.g)(Z,Q)},middleware:X}),$=Object(J.h)(G);var tt=Object(l.b)(null,(function(t){return{onSubmit:function(e,n){return t(z.addContact(e,n))}}}))((function(t){var e=t.onSubmit,n=Object(a.useState)(""),r=Object(b.a)(n,2),o=r[0],s=r[1],i=Object(a.useState)(),u=Object(b.a)(i,2),l=u[0],j=u[1],f=function(){s(""),j("")},h=O.a.generate();return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("form",{className:d.a.form,onSubmit:function(t){return t.preventDefault(),G.getState().contacts.contacts.map((function(t){return t.name.toLocaleLowerCase()})).includes(o.toLocaleLowerCase())?(alert("".concat(o," is already in contacts!")),void f()):(f(),e(o,l))},children:[Object(c.jsxs)("label",{children:["Name",Object(c.jsx)("input",{className:d.a.input,type:"text",name:"name",value:o,onChange:function(t){return s(t.currentTarget.value)},id:h})]}),Object(c.jsxs)("label",{children:["Number",Object(c.jsx)("input",{className:d.a.input,type:"number",name:"number",value:l,onChange:function(t){return j(t.currentTarget.value)}})]}),Object(c.jsx)("button",{className:d.a.buttonAdd,type:"submit",children:"Add contact"})]})})})),et=n(22),nt=n.n(et),ct=n(30),at=function(t){return t.contacts.filter},rt=Object(ct.a)([at,function(t){return t.contacts.contacts}],(function(t,e){var n=t.toLowerCase();return e.filter((function(t){return t.name.toLowerCase().includes(n)}))})),ot=at,st=function(t){return{contacts:rt(t)}},it=Object(l.b)((function(t){return{contacts:st(t)}}),(function(t){return{fetchContacts:function(){return t(z.fetchContacts())}}}))((function(t){var e=t.contacts,n=Object(l.c)();return Object(a.useEffect)((function(){n(z.fetchContacts())}),[]),Object(c.jsxs)("div",{className:nt.a.contactsList,children:[Object(c.jsx)("h2",{className:nt.a.contactsTitle,children:"Contacts"}),Object(c.jsxs)("span",{children:["Total number of contacts - ",e.contacts.length]}),Object(c.jsx)("ul",{className:nt.a.list,children:e.contacts.map((function(t){var e=t.id,a=t.name,r=t.number;return Object(c.jsxs)("li",{className:nt.a.item,children:[a," ",r,Object(c.jsx)("button",{type:"button",onClick:function(){return function(t){return n(z.deleteContact(t))}(e)},className:nt.a.button,children:Object(c.jsx)("span",{children:"Delete"})})]},e)}))})]})})),ut=n(40),lt=n.n(ut),bt=Object(l.b)((function(t){return{contacts:ot(t)}}),(function(t){return{onChange:function(e){return t(S(e.target.value))}}}))((function(t){var e=t.value,n=t.onChange;return Object(c.jsx)("div",{className:lt.a.section,children:Object(c.jsxs)("label",{children:["Find Contacts by name",Object(c.jsx)("input",{type:"text",className:lt.a.input,value:e,onChange:n})]})})}));var jt=Object(l.b)()((function(){return Object(c.jsxs)("div",{className:u.a.mainSection,children:[Object(c.jsx)(tt,{onSubmit:z}),Object(c.jsx)(bt,{}),Object(c.jsx)(it,{})]})})),dt=n(6),ft=n(8),Ot={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getUsername:function(t){return t.auth.user.name},getIsFetchingCurrentUser:function(t){return t.auth.isFetchingCurrent}},ht={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},pt=function(){var t=Object(l.d)(Ot.getIsLoggedIn);return Object(c.jsxs)("nav",{children:[Object(c.jsx)(ft.b,{to:"/",exact:!0,style:ht.link,activeStyle:ht.activeLink,children:"Home"}),t&&Object(c.jsx)(ft.b,{to:"/contacts",exact:!0,style:ht.link,activeStyle:ht.activeLink,children:"Contacts"})]})},gt=n(56),mt=n(34),xt=n.n(mt);function vt(){var t=Object(l.c)(),e=Object(l.d)(Ot.getUsername);return Object(c.jsxs)("div",{className:xt.a.container,children:[Object(c.jsxs)("span",{className:xt.a.name,children:["You logged in as ",e]}),Object(c.jsx)(gt.a,{size:"24"}),Object(c.jsx)("button",{className:xt.a.button,type:"button",onClick:function(){return t(z.logOut())},children:"Log Out"})]})}var _t={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}};function Ct(){return Object(c.jsxs)("div",{children:[Object(c.jsx)(ft.b,{to:"/register",exact:!0,style:_t.link,activeStyle:_t.activeLink,children:"Sign up"}),Object(c.jsx)(ft.b,{to:"/login",exact:!0,style:_t.link,activeStyle:_t.activeLink,children:"Login"})]})}var yt={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}};function kt(){var t=Object(l.d)(Ot.getIsLoggedIn);return console.log(t),Object(c.jsxs)("header",{style:yt.header,children:[Object(c.jsx)(pt,{}),t?Object(c.jsx)(vt,{}):Object(c.jsx)(Ct,{})]})}var Nt=n(54),wt=n.n(Nt);function Lt(t){var e=t.children;return Object(c.jsx)("div",{className:wt.a.container,children:e})}var St=n(35),It=n.n(St);function Tt(){return Object(c.jsx)("div",{className:It.a.greatings,children:Object(c.jsxs)("h1",{children:["Hello dear user, to access your contacts you need to"," ",Object(c.jsx)(ft.b,{to:"/login",exact:!0,className:It.a.link,children:"log in"})," ","or"," ",Object(c.jsx)(ft.b,{to:"/register",exact:!0,className:It.a.link,children:"sign up"})," ","\ud83d\udc40\ud83d\udc31\u200d\ud83c\udfcd"]})})}var At=n(13),Ft=n.n(At);function Ut(t){t.onSubmit;var e=Object(a.useState)(""),n=Object(b.a)(e,2),r=n[0],o=n[1],s=Object(a.useState)(),i=Object(b.a)(s,2),u=i[0],j=i[1],d=Object(a.useState)(),f=Object(b.a)(d,2),h=f[0],p=f[1],g=Object(l.c)(),m=O.a.generate();return Object(c.jsx)("div",{className:Ft.a.registrationContainer,children:Object(c.jsxs)("form",{className:Ft.a.form,onSubmit:function(t){g(z.register({name:r,email:u,password:h})),t.preventDefault(),o(""),j(""),p("")},children:[Object(c.jsxs)("label",{children:["Name",Object(c.jsx)("input",{className:Ft.a.input,type:"text",name:"name",value:r,onChange:function(t){return o(t.currentTarget.value)},id:m})]}),Object(c.jsxs)("label",{children:["E-mail",Object(c.jsx)("input",{className:Ft.a.input,type:"email",name:"email",value:u,onChange:function(t){return j(t.currentTarget.value)}})]}),Object(c.jsxs)("label",{children:["Password",Object(c.jsx)("input",{className:Ft.a.input,type:"password",name:"password",value:h,onChange:function(t){return p(t.currentTarget.value)}})]}),Object(c.jsx)("button",{className:Ft.a.buttonAdd,type:"submit",children:"Register"})]})})}function Et(){var t=Object(a.useState)(""),e=Object(b.a)(t,2),n=e[0],r=e[1],o=Object(a.useState)(""),s=Object(b.a)(o,2),i=s[0],u=s[1],j=Object(l.c)();O.a.generate();return Object(c.jsx)("div",{className:Ft.a.registrationContainer,children:Object(c.jsxs)("form",{className:Ft.a.form,onSubmit:function(t){t.preventDefault(),j(z.logIn({email:n,password:i})),r(""),u("")},children:[Object(c.jsxs)("label",{children:["E-mail",Object(c.jsx)("input",{className:Ft.a.input,type:"email",name:"email",value:n,onChange:function(t){return r(t.currentTarget.value)}})]}),Object(c.jsxs)("label",{children:["Password",Object(c.jsx)("input",{className:Ft.a.input,type:"password",name:"password",value:i,onChange:function(t){return u(t.currentTarget.value)}})]}),Object(c.jsx)("button",{className:Ft.a.buttonAdd,type:"submit",children:"Log in"})]})})}var Pt=n(33);function Dt(t){var e=t.children,n=t.redirectTo,a=void 0===n?"/":n,r=Object(Pt.a)(t,["children","redirectTo"]),o=Object(l.d)(Ot.getIsLoggedIn);return Object(c.jsx)(dt.b,Object(M.a)(Object(M.a)({},r),{},{children:o?e:Object(c.jsx)(dt.a,{to:a})}))}function zt(t){var e=t.children,n=t.restricted,a=void 0!==n&&n,r=t.redirectTo,o=void 0===r?"/":r,s=Object(Pt.a)(t,["children","restricted","redirectTo"]),i=Object(l.d)(Ot.getIsLoggedIn)&&a;return Object(c.jsx)(dt.b,Object(M.a)(Object(M.a)({},s),{},{children:i?Object(c.jsx)(dt.a,{to:o}):e}))}var Bt=function(){var t=Object(l.c)();Object(a.useEffect)((function(){t(z.fetchCurrentUser())}),[t]);var e=Object(l.d)(Ot.getIsFetchingCurrentUser);return console.log(e),e?Object(c.jsx)("h1",{children:"Please stand by, the application is loading..."}):Object(c.jsxs)(Lt,{children:[Object(c.jsx)(kt,{}),Object(c.jsxs)(dt.d,{children:[Object(c.jsx)(zt,{exact:!0,path:"/",children:Object(c.jsx)(Tt,{})}),Object(c.jsx)(zt,{exact:!0,path:"/register",restricted:!0,children:Object(c.jsx)(Ut,{})}),Object(c.jsx)(zt,{exact:!0,path:"/login",restricted:!0,children:Object(c.jsx)(Et,{})}),Object(c.jsx)(Dt,{path:"/contacts",exact:!0,children:Object(c.jsx)(jt,{})})]})]})},Rt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,98)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),c(t),a(t),r(t),o(t)}))},qt=n(55);console.log(G.getState()),s.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(l.a,{store:G,children:Object(c.jsx)(qt.a,{loading:null,persistor:$,children:Object(c.jsx)(ft.a,{children:Object(c.jsx)(Bt,{})})})})}),document.getElementById("root")),Rt()}},[[97,1,2]]]);
//# sourceMappingURL=main.ecbc8ef5.chunk.js.map