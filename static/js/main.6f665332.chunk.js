(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[0],{119:function(t,e,n){},124:function(t,e,n){t.exports={form:"form_form__2jnye",input:"form_input__2ZuzD",buttonAdd:"form_buttonAdd__3wWPI"}},156:function(t,e,n){"use strict";n.r(e);var a=n(2),c=n(0),r=n.n(c),o=n(11),i=n.n(o),s=(n(119),n(74)),u=n.n(s),l=n(7),j=n(13),b=n(22),d=(n(124),n(61)),f=n.n(d),h=n(32),m=n.n(h),O=n(53),g=n(12),p=n(27),x=n.n(p),v="contact/filter",C=Object(g.b)("contacts/addContactRequest"),_=Object(g.b)("contacts/addContactSuccess"),y=Object(g.b)("contacts/addContactError"),k=Object(g.b)("contacts/deleteContactRequest"),w=Object(g.b)("contacts/deleteContactSuccess"),S=Object(g.b)("contacts/deleteContactError"),I=Object(g.b)(v),N=Object(g.b)("contacts/fetchContactRequest"),L=Object(g.b)("contacts/fetchContactSuccess"),T=Object(g.b)("contacts/fetchContactError");x.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var F,U,A,W=function(t){x.a.defaults.headers.common.Authorization="Bearer ".concat(t)},D=function(){x.a.defaults.headers.common.Authorization=""},E={addContact:function(t,e){return function(n){var a={name:t,number:e};n(C()),x.a.post("/contacts",a).then((function(t){var e=t.data;return n(_(e))})).catch((function(t){return n(y(t))}))}},deleteContact:function(t){return function(e){e(k()),x.a.delete("/contacts/".concat(t)).then((function(){return e(w(t))})).catch((function(t){return e(S(t))}))}},fetchContacts:function(){return function(t){t(N()),x.a.get("/contacts").then((function(e){var n=e.data;return t(L(n))})).catch((function(e){return t(T(e))}))}},register:Object(g.c)("auth/register",function(){var t=Object(O.a)(m.a.mark((function t(e){var n,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.post("/users/signup",e);case 3:return n=t.sent,c=n.data,W(c.token),t.abrupt("return",c);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",Object(a.jsx)("span",{children:"\u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"}));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),logIn:Object(g.c)("auth/logIn",function(){var t=Object(O.a)(m.a.mark((function t(e){var n,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.post("/users/login",e);case 3:return n=t.sent,c=n.data,W(c.token),t.abrupt("return",c);case 9:return t.prev=9,t.t0=t.catch(0),t.abrupt("return",Object(a.jsx)("span",{children:"\u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"}));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()),logOut:Object(g.c)("auth/logout",Object(O.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.post("/users/logout");case 3:D(),t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",Object(a.jsx)("span",{children:"\u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"}));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))),fetchCurrentUser:Object(g.c)("auth/refresh",function(){var t=Object(O.a)(m.a.mark((function t(e,n){var a,c,r,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.getState(),null!==(c=a.auth.token)){t.next=4;break}return t.abrupt("return",n.rejectWithValue());case 4:return W(c),t.prev=5,t.next=8,x.a.get("/users/current");case 8:return r=t.sent,o=r.data,t.abrupt("return",o);case 13:t.prev=13,t.t0=t.catch(5);case 15:case"end":return t.stop()}}),t,null,[[5,13]])})));return function(e,n){return t.apply(this,arguments)}}())},z=n(66),P=n(18),B=Object(g.d)([],(F={},Object(j.a)(F,L,(function(t,e){return e.payload})),Object(j.a)(F,_,(function(t,e){return[].concat(Object(z.a)(t),[e.payload])})),Object(j.a)(F,w,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),F)),R=Object(g.d)(!1,(U={},Object(j.a)(U,N,(function(){return!0})),Object(j.a)(U,L,(function(){return!1})),Object(j.a)(U,T,(function(){return!1})),Object(j.a)(U,C,(function(){return!0})),Object(j.a)(U,_,(function(){return!1})),Object(j.a)(U,y,(function(){return!1})),Object(j.a)(U,k,(function(){return!0})),Object(j.a)(U,w,(function(){return!1})),Object(j.a)(U,S,(function(){return!1})),U)),Y=Object(P.c)({contacts:B,filter:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n=e.type,a=e.payload;switch(n){case v:return a;default:return t}},loading:R}),q=n(33),V=n(94),H=n.n(V),J=n(36),K=Object(g.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isloggedIn:!1,isFetchingCurrent:!1},extraReducers:(A={},Object(j.a)(A,E.register.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(j.a)(A,E.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(j.a)(A,E.logOut.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(j.a)(A,E.fetchCurrentUser.fulfilled,(function(t,e){t.user=Object(J.a)({},e.payload),t.isLoggedIn=!0,t.isFetchingCurrent=!1})),Object(j.a)(A,E.fetchCurrentUser.pending,(function(t){t.isFetchingCurrent=!0})),Object(j.a)(A,E.fetchCurrentUser.rejected,(function(t){t.isFetchingCurrent=!1})),A)}).reducer,M=Object(z.a)(Object(g.f)({serializableCheck:{ignoredActions:[q.a,q.f,q.b,q.c,q.d,q.e]}})),Q={key:"auth",storage:H.a,whitelist:["token"]},X=Object(g.a)({reducer:{contacts:Y,auth:Object(q.g)(Q,K)},middleware:M}),Z=Object(q.h)(X),G=n(186),$=n(194),tt=n(196),et=Object(G.a)((function(t){return{root:{"& > *":{margin:t.spacing(1),width:"25ch"}}}}));var nt=Object(l.b)(null,(function(t){return{onSubmit:function(e,n){return t(E.addContact(e,n))}}}))((function(t){var e,n=t.onSubmit,r=Object(c.useState)(""),o=Object(b.a)(r,2),i=o[0],s=o[1],u=Object(c.useState)(),l=Object(b.a)(u,2),d=l[0],h=l[1],m=function(){s(""),h("")},O=et(),g=f.a.generate();return Object(a.jsx)("div",{children:Object(a.jsxs)("form",{className:O.root,onSubmit:function(t){return t.preventDefault(),X.getState().contacts.contacts.map((function(t){return t.name.toLocaleLowerCase()})).includes(i.toLocaleLowerCase())?(alert("".concat(i," is already in contacts!")),void m()):(m(),n(i,d))},children:[Object(a.jsx)($.a,(e={id:"standard-basic",type:"text",name:"name",value:i,onChange:function(t){return s(t.currentTarget.value)}},Object(j.a)(e,"id",g),Object(j.a)(e,"label","Name"),e)),Object(a.jsx)($.a,{id:"standard-basic",type:"number",name:"number",value:d,onChange:function(t){return h(t.currentTarget.value)},label:"Number"}),Object(a.jsx)(tt.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:O.submit,children:"Add contact"})]})})})),at=n(54),ct=n.n(at),rt=n(58),ot=function(t){return t.contacts.filter},it=Object(rt.a)([ot,function(t){return t.contacts.contacts}],(function(t,e){var n=t.toLowerCase();return e.filter((function(t){return t.name.toLowerCase().includes(n)}))})),st=ot,ut=function(t){return{contacts:it(t)}},lt=n(95),jt=n.n(lt),bt=Object(l.b)((function(t){return{contacts:ut(t)}}),(function(t){return{fetchContacts:function(){return t(E.fetchContacts())}}}))((function(t){var e=t.contacts,n=Object(l.c)();Object(c.useEffect)((function(){n(E.fetchContacts())}),[]);var r=Object(G.a)((function(t){return{button:{margin:t.spacing(1)}}}))();return Object(a.jsxs)("div",{className:ct.a.contactsList,children:[Object(a.jsx)("h2",{className:ct.a.contactsTitle,children:"Contacts"}),Object(a.jsxs)("span",{children:["Total number of contacts - ",e.contacts.length]}),Object(a.jsx)("ul",{className:ct.a.list,children:e.contacts.map((function(t){var e=t.id,c=t.name,o=t.number;return Object(a.jsxs)("li",{className:ct.a.item,children:[c," ",o,Object(a.jsx)(tt.a,{size:"small",variant:"outlined",color:"secondary",className:r.button,startIcon:Object(a.jsx)(jt.a,{}),onClick:function(){return function(t){return n(E.deleteContact(t))}(e)},children:"Delete"})]},e)}))})]})})),dt=n(76),ft=n.n(dt),ht=Object(l.b)((function(t){return{contacts:st(t)}}),(function(t){return{onChange:function(e){return t(I(e.target.value))}}}))((function(t){var e=t.value,n=t.onChange;return Object(a.jsx)("div",{className:ft.a.section,children:Object(a.jsxs)("label",{children:["Find Contacts by name",Object(a.jsx)("input",{type:"text",className:ft.a.input,value:e,onChange:n})]})})}));var mt=Object(l.b)()((function(){return Object(a.jsxs)("div",{className:u.a.mainSection,children:[Object(a.jsx)(nt,{onSubmit:E}),Object(a.jsx)(ht,{}),Object(a.jsx)(bt,{})]})})),Ot=n(15),gt=n(20),pt={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getUsername:function(t){return t.auth.user.name},getIsFetchingCurrentUser:function(t){return t.auth.isFetchingCurrent}},xt={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},vt=function(){var t=Object(l.d)(pt.getIsLoggedIn);return Object(a.jsxs)("nav",{children:[Object(a.jsx)(gt.b,{to:"/",exact:!0,style:xt.link,activeStyle:xt.activeLink,children:"Home"}),t&&Object(a.jsx)(gt.b,{to:"/contacts",exact:!0,style:xt.link,activeStyle:xt.activeLink,children:"Contacts"})]})},Ct=n(99),_t=n(79),yt=n.n(_t),kt=n(96),wt=n.n(kt),St=Object(G.a)((function(t){return{button:{margin:t.spacing(1)}}}));function It(){var t=Object(l.c)(),e=Object(l.d)(pt.getUsername),n=St();return Object(a.jsxs)("div",{className:yt.a.container,children:[Object(a.jsxs)("span",{className:yt.a.name,children:["You logged in as ",e]}),Object(a.jsx)(Ct.a,{size:"24"}),Object(a.jsx)(tt.a,{size:"small",variant:"contained",color:"secondary",className:n.button,startIcon:Object(a.jsx)(wt.a,{}),onClick:function(){return t(E.logOut())},children:"Log Out"})]})}var Nt={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}};function Lt(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(gt.b,{to:"/register",exact:!0,style:Nt.link,activeStyle:Nt.activeLink,children:"Sign up"}),Object(a.jsx)(gt.b,{to:"/login",exact:!0,style:Nt.link,activeStyle:Nt.activeLink,children:"Login"})]})}var Tt={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}};function Ft(){var t=Object(l.d)(pt.getIsLoggedIn);return console.log(t),Object(a.jsxs)("header",{style:Tt.header,children:[Object(a.jsx)(vt,{}),t?Object(a.jsx)(It,{}):Object(a.jsx)(Lt,{})]})}var Ut=n(97),At=n.n(Ut);function Wt(t){var e=t.children;return Object(a.jsx)("div",{className:At.a.container,children:e})}var Dt=n(68),Et=n.n(Dt),zt=n.p+"static/media/welcome.c3b77f19.png";function Pt(){return Object(a.jsxs)("div",{className:Et.a.greatings,children:[Object(a.jsxs)("h1",{children:["Hello dear user, to access your contacts you need to"," ",Object(a.jsx)(gt.b,{to:"/login",exact:!0,className:Et.a.link,children:"log in"})," ","or"," ",Object(a.jsx)(gt.b,{to:"/register",exact:!0,className:Et.a.link,children:"sign up"})," "]}),Object(a.jsx)("img",{src:zt,width:"30%"})]})}n(48);var Bt=n(67);function Rt(t){var e=t.children,n=t.redirectTo,c=void 0===n?"/":n,r=Object(Bt.a)(t,["children","redirectTo"]),o=Object(l.d)(pt.getIsLoggedIn);return Object(a.jsx)(Ot.b,Object(J.a)(Object(J.a)({},r),{},{children:o?e:Object(a.jsx)(Ot.a,{to:c})}))}function Yt(t){var e=t.children,n=t.restricted,c=void 0!==n&&n,r=t.redirectTo,o=void 0===r?"/contacts":r,i=Object(Bt.a)(t,["children","restricted","redirectTo"]),s=Object(l.d)(pt.getIsLoggedIn)&&c;return Object(a.jsx)(Ot.b,Object(J.a)(Object(J.a)({},i),{},{children:s?Object(a.jsx)(Ot.a,{to:o}):e}))}var qt=n(197),Vt=n(192),Ht=n(190),Jt=n(193),Kt=n(195),Mt=n(65),Qt=n.n(Mt),Xt=n(159),Zt=n(191);function Gt(){return Object(a.jsxs)(Xt.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(a.jsx)(Ht.a,{color:"inherit",href:"https://material-ui.com/",children:"Your private contacts"})," ",(new Date).getFullYear(),"."]})}var $t=Object(G.a)((function(t){return{paper:{marginTop:t.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:t.spacing(1),backgroundColor:t.palette.secondary.main},form:{width:"100%",marginTop:t.spacing(1)},submit:{margin:t.spacing(3,0,2)}}}));function te(){var t=$t(),e=Object(c.useState)(""),n=Object(b.a)(e,2),r=n[0],o=n[1],i=Object(c.useState)(""),s=Object(b.a)(i,2),u=s[0],j=s[1],d=Object(l.c)();return Object(a.jsxs)(Zt.a,{component:"main",maxWidth:"xs",children:[Object(a.jsx)(Vt.a,{}),Object(a.jsxs)("div",{className:t.paper,children:[Object(a.jsx)(qt.a,{className:t.avatar,children:Object(a.jsx)(Qt.a,{})}),Object(a.jsx)(Xt.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(a.jsxs)("form",{className:t.form,noValidate:!0,onSubmit:function(t){t.preventDefault(),d(E.logIn({email:r,password:u})),o(""),j("")},children:[Object(a.jsx)($.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"email",label:"Email*",name:"email",value:r,onChange:function(t){return o(t.currentTarget.value)},autoComplete:"email",autoFocus:!0}),Object(a.jsx)($.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"password",value:u,onChange:function(t){return j(t.currentTarget.value)},label:"Password*",type:"password",id:"password",autoComplete:"current-password"}),Object(a.jsx)(tt.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Sign In"}),Object(a.jsx)(Jt.a,{container:!0})]})]}),Object(a.jsx)(Kt.a,{mt:8,children:Object(a.jsx)(Gt,{})})]})}var ee=n(189);function ne(){return Object(a.jsxs)(Xt.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(a.jsx)(Ht.a,{color:"inherit",href:"https://material-ui.com/",children:"Your private contacts"})," ",(new Date).getFullYear(),"."]})}var ae=Object(G.a)((function(t){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundColor:"light"===t.palette.type?t.palette.grey[50]:t.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:t.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:t.spacing(1),backgroundColor:t.palette.secondary.main},form:{width:"100%",marginTop:t.spacing(1)},submit:{margin:t.spacing(3,0,2)}}}));function ce(){var t=ae(),e=Object(c.useState)(""),n=Object(b.a)(e,2),r=n[0],o=n[1],i=Object(c.useState)(),s=Object(b.a)(i,2),u=s[0],j=s[1],d=Object(c.useState)(),f=Object(b.a)(d,2),h=f[0],m=f[1],O=Object(l.c)();return Object(a.jsxs)(Jt.a,{container:!0,component:"main",className:t.root,children:[Object(a.jsx)(Vt.a,{}),Object(a.jsx)(Jt.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),Object(a.jsx)(Jt.a,{item:!0,xs:12,sm:8,md:5,component:ee.a,elevation:6,square:!0,children:Object(a.jsxs)("div",{className:t.paper,children:[Object(a.jsx)(qt.a,{className:t.avatar,children:Object(a.jsx)(Qt.a,{})}),Object(a.jsx)(Xt.a,{component:"h1",variant:"h5",children:"Sign Up"}),Object(a.jsxs)("form",{className:t.form,noValidate:!0,onSubmit:function(t){O(E.register({name:r,email:u,password:h})),t.preventDefault(),o(""),j(""),m("")},children:[Object(a.jsx)($.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"name",label:"Name*",name:"name",value:r,onChange:function(t){return o(t.currentTarget.value)},autoComplete:"name",autoFocus:!0}),Object(a.jsx)($.a,{variant:"outlined",margin:"normal",fullWidth:!0,id:"email",label:"Email*",name:"email",value:u,onChange:function(t){return j(t.currentTarget.value)},autoComplete:"email",autoFocus:!0}),Object(a.jsx)($.a,{variant:"outlined",margin:"normal",fullWidth:!0,name:"password",value:h,onChange:function(t){return m(t.currentTarget.value)},label:"Password*",type:"password",id:"password",autoComplete:"current-password"}),Object(a.jsx)(tt.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,children:"Sign Up"}),Object(a.jsx)(Jt.a,{container:!0}),Object(a.jsx)(Kt.a,{mt:5,children:Object(a.jsx)(ne,{})})]})]})})]})}var re=function(){var t=Object(l.c)();Object(c.useEffect)((function(){t(E.fetchCurrentUser())}),[t]);var e=Object(l.d)(pt.getIsFetchingCurrentUser);return console.log(e),e?Object(a.jsx)("h1",{children:"Please stand by, the application is loading..."}):Object(a.jsxs)(Wt,{children:[Object(a.jsx)(Ft,{}),Object(a.jsxs)(Ot.d,{children:[Object(a.jsx)(Yt,{exact:!0,path:"/",children:Object(a.jsx)(Pt,{})}),Object(a.jsx)(Yt,{exact:!0,path:"/register",restricted:!0,children:Object(a.jsx)(ce,{})}),Object(a.jsx)(Yt,{exact:!0,path:"/login",restricted:!0,children:Object(a.jsx)(te,{})}),Object(a.jsx)(Rt,{path:"/contacts",exact:!0,children:Object(a.jsx)(mt,{})})]})]})},oe=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,200)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),a(t),c(t),r(t),o(t)}))},ie=n(98);console.log(X.getState()),i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(l.a,{store:X,children:Object(a.jsx)(ie.a,{loading:null,persistor:Z,children:Object(a.jsx)(gt.a,{children:Object(a.jsx)(re,{})})})})}),document.getElementById("root")),oe()},48:function(t,e,n){t.exports={form:"registration_form__1P9zo",input:"registration_input__1eFNx",buttonAdd:"registration_buttonAdd__2ugu7",registrationContainer:"registration_registrationContainer__3aU0b"}},54:function(t,e,n){t.exports={list:"contacs_list__1h71m",item:"contacs_item__1g80T",contactsList:"contacs_contactsList__3z6lQ",contactsTitle:"contacs_contactsTitle__2tKf0"}},68:function(t,e,n){t.exports={link:"home_link__2Hf76",greatings:"home_greatings__3rca6"}},74:function(t,e,n){t.exports={mainSection:"app_mainSection__1YYCI"}},76:function(t,e,n){t.exports={section:"filter_section__2sXh1",input:"filter_input__wa3kE"}},79:function(t,e,n){t.exports={container:"usermenu_container__3dfpV",name:"usermenu_name__29NPj",button:"usermenu_button__3Uswq"}},97:function(t,e,n){t.exports={container:"container_container__3_dRP"}}},[[156,1,2]]]);
//# sourceMappingURL=main.6f665332.chunk.js.map